<!--pages/setting/setting.wxml-->
<view class="page">
    <view class="page__hd">
        <view class="page__title">当前排练信息</view>
        <view class="page__desc">排练时间：{{readableDate}} {{rehearsalDate.startTime}} - {{rehearsalDate.endTime}} </view>
        <view class="page__desc">排练地点：{{rehearsalLocation}}</view>
    </view>

    <view class="weui-cells__title"></view>
    <view class="weui-cells weui-cells_after-title">
        <view class="weui-cell weui-cell_access" bindtap="settingStatus" data-item="settingAddress" data-status="{{settingStatus.settingAddress}}">
            <view class="weui-cell__bd">
                <view style="display: inline-block; vertical-align: middle">设置排练地址</view>
            </view>
            <view class="weui-cell__ft weui-cell__ft_in-access"></view>
        </view>
        <view style="padding-left: 10px" wx:if="{{settingStatus.settingAddress}}">
          <view class="weui-cells weui-cells_after-title">
              <radio-group bindchange="updateAddress">
                  <label class="weui-cell weui-check__label" wx:for="{{addressBook}}" wx:key="value">
                      <radio class="weui-check" value="{{item.address}}" checked="{{item.checked}}"/>

                      <view class="weui-cell__bd">{{item.name}}</view>
                      <view class="weui-cell__ft weui-cell__ft_in-radio" wx:if="{{item.checked}}">
                          <icon class="weui-icon-radio" type="success_no_circle" size="16"></icon>
                      </view>
                  </label>
              </radio-group>
              <view class="weui-cell weui-cell_link">
                  <view class="weui-cell__bd" bindtap="selectLocation">添加地址</view>
              </view>
          </view>
        </view>
        <!--<view class="weui-cells__title">{{address}}</view>-->

        <view class="weui-cell weui-cell_access" bindtap="settingStatus" data-item="settingDate" data-status="{{settingStatus.settingDate}}">
            <view class="weui-cell__bd">
                <view style="display: inline-block; vertical-align: middle">设置排练时间</view>
            </view>
            <view class="weui-cell__ft weui-cell__ft_in-access"></view>
        </view>

        <view style="padding-left: 10px" wx:if="{{settingStatus.settingDate}}">
          <view class="weui-cell weui-cell_input">
            <view class="cell-date datelabel">日期</view>
            <span class="verticalLine"></span>
            <view class="cell-start datelabel">开始</view>
            <span class="verticalLine"></span>
            <view class="cell-end datelabel">结束</view>
          </view>
          <view class="weui-cell weui-cell_input">
              <view class="cell-date">
                  <picker mode="date" value="{{date}}" start="2015-01-01" end="2099-12-31" bindchange="bindDateChange">
                      <view class="weui-input">{{rehearsalDate.date}}</view>
                  </picker>
              </view>
              <span class="verticalLine"></span>
              <view class="cell-start">
                  <picker mode="time" value="{{time}}" start="00:00" end="23:59" bindchange="bindStartTimeChange">
                      <view class="weui-input">{{rehearsalDate.startTime}}</view>
                  </picker>
              </view>
              <span class="verticalLine"></span>
              <view class="cell-end">
                  <picker mode="time" value="{{time}}" start="00:00" end="23:59" bindchange="bindEndTimeChange">
                      <view class="weui-input">{{rehearsalDate.endTime}}</view>
                  </picker>
              </view>
          </view>
        </view>

        <view class="weui-cell weui-cell_access" bindtap="settingStatus" data-item="managingAdministrator" data-status="{{settingStatus.managingAdministrator}}">
            <view class="weui-cell__bd">
                <view style="display: inline-block; vertical-align: middle">管理员管理</view>
            </view>
            <view class="weui-cell__ft weui-cell__ft_in-access">开发中</view>
        </view>

        <view wx:if="{{settingStatus.managingAdministrator}}">
          <view class="weui-cell" style="padding-left: 10px">
            <view class="weui-cell" style="color: #888; size: 12px;">当前管理员：</view>
            <view wx:for="{{administrators}}" wx:for-item="admin">
              <view class="weui-cell__hd" style="position: relative;margin-right: 10px;">
                <!--<view bindtap="addAdministrator">添加管理员</view>-->
                <image src="{{admin.avatarurl}}" style="width: 50px; height: 50px; display: block"/>
                <view class="weui-badge" style="position: absolute;top: -.4em;right: -.4em;" bindtap="removeAdministrator"  data-index="{{index}}">X</view>
              </view>
            </view>

            <!--
            <view class="weui-cell__bd">
                  <picker bindchange="addAdministrator" value="{{adminCandidateIdx}}" range="{{adminCandidate}}">
                      <view class="weui-select weui-select_in-select-after">{{adminCandidate[adminCandidateIdx]}}</view>
                  </picker>
            </view>  
            -->   
          </view>

          <view class="weui-cell" style="padding-left: 10px">
            <view class="weui-cell" style="color: #888; size: 12px;">添加管理员：</view>
            <view wx:for="{{adminCandidate}}" wx:for-item="admin">
              <view class="weui-cell__hd" style="position: relative;margin-right: 10px;" bindtap="addAdministrator" data-index="{{index}}">
                <!--<view bindtap="addAdministrator">添加管理员</view>-->
                <image src="{{admin.avatarurl}}" style="width: 50px; height: 50px; display: block"/>
                <view class="add-badge" style="position: absolute;top: -.4em;right: -.4em;" wx:if="{{admin.checked}}"></view>
              </view>
            </view>

            <!--
            <view class="weui-cell__bd">
                  <picker bindchange="addAdministrator" value="{{adminCandidateIdx}}" range="{{adminCandidate}}">
                      <view class="weui-select weui-select_in-select-after">{{adminCandidate[adminCandidateIdx]}}</view>
                  </picker>
            </view>  
            -->   
          </view>

          <view class="weui-cell weui-cell_link">
              <view class="weui-cell__bd" bindtap="confirmSetting">确认管理员变更</view>
          </view>
      </view>

    </view>

</view>
